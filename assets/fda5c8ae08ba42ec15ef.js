import"./styles/main.scss";import{keys}from"./js/keys";import{keyboard}from"./js/keyboard";import{checkLanguage,setLanguage}from"./js/localStorage";document.body.innerHTML=keyboard;const rows=document.querySelectorAll(".row"),textarea=document.querySelector(".textarea"),excludeKeysRegex=/Tab|Capslock|Shift|Ctrl|Lang|Alt|Enter|Del|Backspace|Space/;let capsLock=!1,langKeys=checkLanguage()||keys.enKeys;const generateKeyboard=()=>{rows.forEach(((e,t)=>{for(let a=0;a<e.children.length;a+=1){const n=e.children[a];capsLock?(n.innerHTML=langKeys[t][a].toUpperCase(),excludeKeysRegex.test(langKeys[t][a])&&(n.innerHTML=langKeys[t][a]),"Space"===n.innerHTML&&(n.innerHTML=" ")):(n.innerHTML=langKeys[t][a].toLowerCase(),excludeKeysRegex.test(langKeys[t][a])&&(n.innerHTML=langKeys[t][a]),"Space"===n.innerHTML&&(n.innerHTML=" "))}}))};document.addEventListener("DOMContentLoaded",generateKeyboard);const setButtonSymbol=e=>{switch(e.textContent.toLowerCase()){case"tab":textarea.innerHTML+="   ";break;case"shift":case"ctrl":case"alt":case"del":textarea.innerHTML+="";break;case"capslock":capsLock=!capsLock,generateKeyboard();break;case"enter":textarea.innerHTML+="\n";break;case"backspace":textarea.innerHTML=textarea.innerHTML.slice(0,textarea.innerHTML.length-1);break;case"lang":langKeys=langKeys===keys.enKeys?keys.ruKeys:keys.enKeys,generateKeyboard();break;default:textarea.innerHTML+=capsLock?e.textContent.toUpperCase():e.textContent}};document.addEventListener("keydown",(e=>{"AltLeft"===e.code&&e.ctrlKey&&(langKeys=langKeys===keys.enKeys?keys.ruKeys:keys.enKeys,setLanguage(langKeys),generateKeyboard())})),document.onkeydown=e=>{"ShiftLeft"===e.code&&(langKeys===keys.enKeys?langKeys=keys.enShiftKeys:langKeys===keys.ruKeys&&(langKeys=keys.ruShiftKeys),capsLock=!0,generateKeyboard())},document.onkeyup=e=>{"ShiftLeft"===e.code&&(langKeys===keys.enShiftKeys?langKeys=keys.enKeys:langKeys===keys.ruShiftKeys&&(langKeys=keys.ruKeys),capsLock=!1,generateKeyboard())},document.addEventListener("keydown",(e=>{e.preventDefault();const t=document.querySelectorAll("[data-code]"),{code:a}=e;t.forEach((e=>{e.dataset.code===a&&(setButtonSymbol(e),e.classList.add("active"))})),textarea.focus(),textarea.setSelectionRange(textarea.value.length,textarea.value.length)})),document.addEventListener("keyup",(e=>{const t=document.querySelectorAll("[data-code]"),{code:a}=e;t.forEach((e=>{e.dataset.code===a&&e.classList.remove("active")}))})),document.addEventListener("mousedown",(e=>{e.preventDefault();const t=document.querySelectorAll("[data-code]"),{code:a}=e.target.dataset;t.forEach((e=>{e.dataset.code===a&&(setButtonSymbol(e),e.classList.add("active"))})),textarea.focus(),textarea.setSelectionRange(textarea.value.length,textarea.value.length)})),document.addEventListener("mouseup",(e=>{e.preventDefault(),document.querySelectorAll("[data-code]").forEach((e=>{e.classList.remove("active")})),textarea.focus(),textarea.setSelectionRange(textarea.value.length,textarea.value.length)}));